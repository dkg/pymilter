<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pymilter: mime Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pymilter
   &#160;<span id="projectnumber">1.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mime Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module provides a "defang" function to replace naughty attachments.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmime_1_1__defang.html">_defang</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmime_1_1HTMLScriptFilter.html">HTMLScriptFilter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmime_1_1MimeGenerator.html">MimeGenerator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix multipart handling in email.Generator.  <a href="classmime_1_1MimeGenerator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmime_1_1MimeMessage.html">MimeMessage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enhance email.message.Message.  <a href="classmime_1_1MimeMessage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmime_1_1SGMLFilter.html">SGMLFilter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac987c500e1755eaf5904708a4d6b57b3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemime.html#ac987c500e1755eaf5904708a4d6b57b3">zipnames</a> (txt)</td></tr>
<tr class="memdesc:ac987c500e1755eaf5904708a4d6b57b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of filenames in a zip file.  <a href="#ac987c500e1755eaf5904708a4d6b57b3">More...</a><br /></td></tr>
<tr class="separator:ac987c500e1755eaf5904708a4d6b57b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22995b40d0b428aed22743e7f7228d22"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemime.html#a22995b40d0b428aed22743e7f7228d22">unquote</a> (s)</td></tr>
<tr class="separator:a22995b40d0b428aed22743e7f7228d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d6dd939cf9d376c5d9e37afbfd82cc"><td class="memItemLeft" align="right" valign="top"><a id="af7d6dd939cf9d376c5d9e37afbfd82cc"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>_unquotevalue</b> (value)</td></tr>
<tr class="separator:af7d6dd939cf9d376c5d9e37afbfd82cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab726c4958d5fc41917e36cee92a4f4cf"><td class="memItemLeft" align="right" valign="top"><a id="ab726c4958d5fc41917e36cee92a4f4cf"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>message_from_file</b> (fp)</td></tr>
<tr class="separator:ab726c4958d5fc41917e36cee92a4f4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ef47b1de3d284af911d2fc8540cfe1"><td class="memItemLeft" align="right" valign="top"><a id="af6ef47b1de3d284af911d2fc8540cfe1"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>check_ext</b> (name)</td></tr>
<tr class="separator:af6ef47b1de3d284af911d2fc8540cfe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ca143d708aa173ada0eafa29c9a1a9"><td class="memItemLeft" align="right" valign="top"><a id="ab5ca143d708aa173ada0eafa29c9a1a9"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>check_name</b> (msg, savname=None, ckname=check_ext, scan_zip=False)</td></tr>
<tr class="separator:ab5ca143d708aa173ada0eafa29c9a1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd1f5a3b3264cf9386a3652dc277ee6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemime.html#a8dd1f5a3b3264cf9386a3652dc277ee6">check_attachments</a> (msg, check)</td></tr>
<tr class="separator:a8dd1f5a3b3264cf9386a3652dc277ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb369301ea2270c35e5e265c10b8ca2a"><td class="memItemLeft" align="right" valign="top"><a id="adb369301ea2270c35e5e265c10b8ca2a"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>check_html</b> (msg, savname=None)</td></tr>
<tr class="separator:adb369301ea2270c35e5e265c10b8ca2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c22774b812dd52bf18f94e24ce5663"><td class="memItemLeft" align="right" valign="top"><a id="ab7c22774b812dd52bf18f94e24ce5663"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>_list_attach</b> (msg)</td></tr>
<tr class="separator:ab7c22774b812dd52bf18f94e24ce5663"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a674f6ca2fa1fdcc6a63f8483bbfa61de"><td class="memItemLeft" align="right" valign="top"><a id="a674f6ca2fa1fdcc6a63f8483bbfa61de"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BytesIO</b> = StringIO</td></tr>
<tr class="separator:a674f6ca2fa1fdcc6a63f8483bbfa61de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb63630aa0e43569c4061655cea4c2f"><td class="memItemLeft" align="right" valign="top"><a id="afcb63630aa0e43569c4061655cea4c2f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>as_bytes</b></td></tr>
<tr class="separator:afcb63630aa0e43569c4061655cea4c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ea916ef2128b3ff9308cef86a3f120"><td class="memItemLeft" align="right" valign="top"><a id="a28ea916ef2128b3ff9308cef86a3f120"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>extlist</b> = ''.join(.split())</td></tr>
<tr class="separator:a28ea916ef2128b3ff9308cef86a3f120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa7a33441aea0a0832b107b22630d6af"><td class="memItemLeft" align="right" valign="top"><a id="aaa7a33441aea0a0832b107b22630d6af"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>bad_extensions</b> = ['.' + x for x in extlist.split(',')]</td></tr>
<tr class="separator:aaa7a33441aea0a0832b107b22630d6af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6b651706008a7a179b1489ea302b736"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><b>virus_msg</b></td></tr>
<tr class="separator:af6b651706008a7a179b1489ea302b736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1253e7b5820ae6fab84be938b9c476df"><td class="memItemLeft" align="right" valign="top"><a id="a1253e7b5820ae6fab84be938b9c476df"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>defang</b> = <a class="el" href="classmime_1_1__defang.html">_defang</a>()</td></tr>
<tr class="separator:a1253e7b5820ae6fab84be938b9c476df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87593132843e0cb215bb48f4df0debec"><td class="memItemLeft" align="right" valign="top"><a id="a87593132843e0cb215bb48f4df0debec"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>declname</b> = re.compile(r'[a-zA-Z][-_.a-zA-Z0-9]*\s*')</td></tr>
<tr class="separator:a87593132843e0cb215bb48f4df0debec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5153f5d01b78b8c88167c35eb569019"><td class="memItemLeft" align="right" valign="top"><a id="ad5153f5d01b78b8c88167c35eb569019"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>declstringlit</b> = re.compile(r'(\'[^\']*\'|&quot;[^&quot;]*&quot;)\s*')</td></tr>
<tr class="separator:ad5153f5d01b78b8c88167c35eb569019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d9d054418386b15e133ad37392516c"><td class="memItemLeft" align="right" valign="top"><a id="ad4d9d054418386b15e133ad37392516c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fp</b> = open(fname,'rb')</td></tr>
<tr class="separator:ad4d9d054418386b15e133ad37392516c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359b76bbfed80f1a4cdc3ffd238931d8"><td class="memItemLeft" align="right" valign="top"><a id="a359b76bbfed80f1a4cdc3ffd238931d8"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>msg</b> = message_from_file(fp)</td></tr>
<tr class="separator:a359b76bbfed80f1a4cdc3ffd238931d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module provides a "defang" function to replace naughty attachments. </p>
<p>We also provide workarounds for bugs in the email module that comes with python. The "bugs" fixed mostly come up only with malformed messages - but that is what you have when dealing with spam. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8dd1f5a3b3264cf9386a3652dc277ee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dd1f5a3b3264cf9386a3652dc277ee6">&#9670;&nbsp;</a></span>check_attachments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mime.check_attachments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Scan attachments.
msg     MimeMessage
check   function(MimeMessage): int
      Return CONTINUE, REJECT, ACCEPT
</pre> 
<p class="reference">Referenced by <a class="el" href="classmime_1_1__defang.html#a1b1e9f3a718f22139fad7b6952394292">mime._defang.__call__()</a>.</p>

</div>
</div>
<a id="a22995b40d0b428aed22743e7f7228d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22995b40d0b428aed22743e7f7228d22">&#9670;&nbsp;</a></span>unquote()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mime.unquote </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove quotes from a string.</pre> 
</div>
</div>
<a id="ac987c500e1755eaf5904708a4d6b57b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac987c500e1755eaf5904708a4d6b57b3">&#9670;&nbsp;</a></span>zipnames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mime.zipnames </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>txt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a list of filenames in a zip file. </p>
<p>Embedded zip files are recursively expanded. </p>

<p class="reference">Referenced by <a class="el" href="classmime_1_1MimeMessage.html#a9e356422f84df99bc996cc61be9b4359">mime.MimeMessage.getnames()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af6b651706008a7a179b1489ea302b736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6b651706008a7a179b1489ea302b736">&#9670;&nbsp;</a></span>virus_msg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string mime.virus_msg</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  <span class="stringliteral">&quot;&quot;&quot;This message appeared to contain a virus.</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">It was originally named &#39;%s&#39;, and has been removed.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral">A copy of your original message was saved as &#39;%s:%s&#39;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral">See your administrator.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

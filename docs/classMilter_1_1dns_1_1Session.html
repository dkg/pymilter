<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pymilter: Milter.dns.Session Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pymilter
   &#160;<span id="projectnumber">1.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceMilter.html">Milter</a></li><li class="navelem"><a class="el" href="namespaceMilter_1_1dns.html">dns</a></li><li class="navelem"><a class="el" href="classMilter_1_1dns_1_1Session.html">Session</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classMilter_1_1dns_1_1Session-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Milter.dns.Session Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Milter.dns.Session:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMilter_1_1dns_1_1Session.png" usemap="#Milter.dns.Session_map" alt=""/>
  <map id="Milter.dns.Session_map" name="Milter.dns.Session_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba691f835ff819ac842c97815c06ef56"><td class="memItemLeft" align="right" valign="top"><a id="aba691f835ff819ac842c97815c06ef56"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self)</td></tr>
<tr class="separator:aba691f835ff819ac842c97815c06ef56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa45a3f01503b841ab4f40f964a17e3d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMilter_1_1dns_1_1Session.html#aaa45a3f01503b841ab4f40f964a17e3d">dns</a> (self, name, qtype, cnames=None)</td></tr>
<tr class="memdesc:aaa45a3f01503b841ab4f40f964a17e3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cached DNS lookup.  <a href="#aaa45a3f01503b841ab4f40f964a17e3d">More...</a><br /></td></tr>
<tr class="separator:aaa45a3f01503b841ab4f40f964a17e3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00c9f58025adc6951ccf82636dea74d5"><td class="memItemLeft" align="right" valign="top"><a id="a00c9f58025adc6951ccf82636dea74d5"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>dns_txt</b> (self, domainname, enc='ascii')</td></tr>
<tr class="separator:a00c9f58025adc6951ccf82636dea74d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a9429eda973bb379c04984b3c4f115052"><td class="memItemLeft" align="right" valign="top"><a id="a9429eda973bb379c04984b3c4f115052"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cache</b></td></tr>
<tr class="separator:a9429eda973bb379c04984b3c4f115052"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a06e8cb309df6a76740b612a6afd31671"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMilter_1_1dns_1_1Session.html#a06e8cb309df6a76740b612a6afd31671">SAFE2CACHE</a></td></tr>
<tr class="memdesc:a06e8cb309df6a76740b612a6afd31671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Additional DNS RRs we can safely cache.  <a href="#a06e8cb309df6a76740b612a6afd31671">More...</a><br /></td></tr>
<tr class="separator:a06e8cb309df6a76740b612a6afd31671"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A Session object has a simple cache with no TTL that is valid
 for a single "session", for example an SMTP conversation.</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aaa45a3f01503b841ab4f40f964a17e3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa45a3f01503b841ab4f40f964a17e3d">&#9670;&nbsp;</a></span>dns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Milter.dns.Session.dns </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>qtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cnames</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cached DNS lookup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the DNS label to query </td></tr>
    <tr><td class="paramname">qtype</td><td>the query type, e.g. 'A' </td></tr>
    <tr><td class="paramname">cnames</td><td>tracks CNAMES already followed in recursive calls <pre class="fragment">DNS query.

If the result is in cache, return that.  Otherwise pull the
result from DNS, and cache ALL answers, so additional info
is available for further queries later.

CNAMEs are followed.

If there is no data, [] is returned.

pre: qtype in ['A', 'AAAA', 'MX', 'PTR', 'TXT', 'SPF']
post: isinstance(__return__, types.ListType)
</pre> </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References Milter.dns.Session.cache, Milter.cache.AddrCache.cache, <a class="el" href="classMilter_1_1dns_1_1Session.html#aaa45a3f01503b841ab4f40f964a17e3d">Milter.dns.Session.dns()</a>, and <a class="el" href="namespaceMilter_1_1dns.html#a511cd9391d877cbb011cb24b29acb00f">Milter.dns.DNSLookup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classMilter_1_1dns_1_1Session.html#aaa45a3f01503b841ab4f40f964a17e3d">Milter.dns.Session.dns()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a06e8cb309df6a76740b612a6afd31671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e8cb309df6a76740b612a6afd31671">&#9670;&nbsp;</a></span>SAFE2CACHE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Milter.dns.Session.SAFE2CACHE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=  frozenset((</div><div class="line">    (<span class="stringliteral">&#39;MX&#39;</span>,<span class="stringliteral">&#39;MX&#39;</span>), (<span class="stringliteral">&#39;MX&#39;</span>,<span class="stringliteral">&#39;A&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;CNAME&#39;</span>,<span class="stringliteral">&#39;CNAME&#39;</span>), (<span class="stringliteral">&#39;CNAME&#39;</span>,<span class="stringliteral">&#39;A&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;A&#39;</span>,<span class="stringliteral">&#39;A&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;AAAA&#39;</span>,<span class="stringliteral">&#39;AAAA&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;PTR&#39;</span>,<span class="stringliteral">&#39;PTR&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;NS&#39;</span>,<span class="stringliteral">&#39;NS&#39;</span>), (<span class="stringliteral">&#39;NS&#39;</span>,<span class="stringliteral">&#39;A&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;TXT&#39;</span>,<span class="stringliteral">&#39;TXT&#39;</span>),</div><div class="line">    (<span class="stringliteral">&#39;SPF&#39;</span>,<span class="stringliteral">&#39;SPF&#39;</span>)</div><div class="line">  ))</div></div><!-- fragment -->
<p>Additional DNS RRs we can safely cache. </p>
<p>We have to be careful which additional DNS RRs we cache. For instance, PTR records are controlled by the connecting IP, and they could poison our local cache with bogus A and MX records. <br />
 Each entry is a tuple of (query_type,rr_type). So for instance, the entry ('MX','A') says it is safe (for milter purposes) to cache any 'A' RRs found in an 'MX' query. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Milter/dns.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
